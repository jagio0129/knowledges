Fargateとは
===

[公式の説明](https://aws.amazon.com/jp/fargate/)

> Amazon Elastic Container Service (ECS) と Amazon Elastic Kubernetes Service (EKS) の両方で動作する、コンテナ向けサーバーレスコンピューティングエンジンです。Fargate を使用すると、アプリケーションの構築に簡単に集中することができます。Fargate ではサーバーのプロビジョンと管理が不要となり、アプリケーションごとにリソースを指定してその分のみ料金を支払うことができ、設計段階からのアプリケーション分離によりセキュリティを強化します。

> Fargate では、インスタンスの選択やクラスター容量のスケーリングなしに、適切なコンピューティング容量が割り当てられます。料金は、コンテナの実行に必要なリソースの分のみを支払うため、オーバープロビジョニングや追加のサーバー料金は一切発生しません。Fargate による各タスクおよび各ポッドの実行には、独自のカーネルとそれぞれ独立したコンピューティング環境が使用されます。これにより、お使いのアプリケーションでワークロードの分離と設計段階からのセキュリティの向上が実現します。そしてこれが、Vanguard、Accenture、Foursquare、Ancestry などのお客様がミッションクリティカルなアプリケーションの実行に Fargate を選ぶ理由です。

## アプリのデプロイと管理
- EC2だと以下が必要になる
  - 全体のリソースを見積もりインスタンスの選定と台数の計算
  - リソースのモニタリング
- Fargateの場合
  - コンテナ実行時にCPU、メモリを選択するだけ

## 適切なサイズのリソース
クラスタのキャパシティに気を配る必要がある。スケールする際に実行に必要なリソースがなければコンテナを新規に実行できないため。常にクラスタをモニタリングして必要に応じてスケールする必要がある。この戦略には以下のようなものがある。

1. 常に余裕を持ってクラスタのキャパシティをコントロールする。
  - 常に余分なリソースを稼働させないといけないためサーバコストが余分にかかる
2. コンテナが新規に起動・配置できない状況をフックしてホストマシンを追加する
  - コンテナ起動時間にホストマシン起動のオーバーヘッドも含まれるため、コンテナのアジリティが低下する

Fargateでは上記のようなことを考慮する必要がない。コンテナに対して指定っしたリソース要件に一致するよう、コンピューティングを起動及びスケーリングする。

## セキュリティレベルを容易に向上
- EC2などの仮想マシンは以下のことが必要になる
  - OS、ミドルウェアのバージョンアップ
  - セキュリティパッチの運用
- OSやDockerエンジン、ecws-agent等のバージョンアップやセキュリティパッチの運用もFargateプラットフォームがやってくれる。

## 料金プラン
- 1時間あたりのCPUとメモリの使用量に対して課金される
- コンテナで他のAWSサービスを使用したりデータを転送する場合は追加料金が発生する


### 参考サイト
- [AWS Fargate](https://aws.amazon.com/jp/fargate/)
- [AWS fargateとは何か？](https://www.acrovision.jp/service/aws/?p=1244)
- [AWS Fargateの特長と始め方](https://www.acrovision.jp/service/aws/?p=774)
